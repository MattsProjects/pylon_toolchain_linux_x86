<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>pylon Application SDK: Programmer&#39;s Guide and API Reference for Linux</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="modified_doxygen-unix.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
</head>
<body>
<div id="TopBanner"><table width="100%"><tr>
    <td width="196px"><img src="Pylon_Logo.png" alt="Pylon Logo" width="196px"></td>
    <td width="99%"></td>
    <td width="184px"><img src="Basler_Logo.png" alt="Basler Logo" width="184px"></td>
</tr></table></div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">pylon C++ Data Processing Programmer&#39;s Guide</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Sample Code </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>CMake Build Files</h2>
<p>Samples are provided with <a href="https://cmake.org/">CMake</a> build files.</p>
<h2>Building Samples on Windows</h2>
<p>The integrated development environment Microsoft Visual Studio 2017 or later provides native CMake support. Copy the samples folder (Samples\pylonDataProcessing\C++) to a writable location of your choice. Make sure that the folder is not under \Program Files and that you have the required rights to write to that folder. Right-click on the C++ folder and select "Open with Visual Studio".</p>
<p>Alternatively, use Visual Studio 2019 or a later version. Select Continue without code in the Visual Studio welcome screen. In the File menu, select Open\CMake... Select the CMakeLists.txt from your copy of the Development\Samples\pylonDataProcessing\C++ folder.</p>
<h2>Building Samples on Linux</h2>
<p>The samples can be found in the /share/pylon/Samples/pylonDataProcessing/C++ folder of your installation.</p>
<p>Install make, cmake, and g++ if needed, e.g.,:</p>
<div class="fragment"><div class="line">sudo apt-get install cmake make g++ </div></div><!-- fragment --><p>Set up the environment for building the sample by running:</p>
<div class="fragment"><div class="line">source &lt;PATH_TO_PYLON_INSTALLATION&gt;/bin/pylon-setup-env.sh &lt;PATH_TO_PYLON_INSTALLATION&gt; </div></div><!-- fragment --><p>Change to the pylonDataProcessing/C++ folder and execute:</p>
<div class="fragment"><div class="line">mkdir build </div><div class="line"></div><div class="line">cd build </div><div class="line"></div><div class="line">cmake .. </div><div class="line"></div><div class="line">make </div></div><!-- fragment --><p>Run the sample of your choice that has been built in the output folder.</p>
<h2>Samples</h2>
<div class="fragment"><div class="line"><span class="comment">// camera/main.cpp</span></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">    Sample using and parameterizing the Camera vTool (no license required)</span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="comment">// Include files to use the pylon API.</span></div><div class="line"><span class="preprocessor">#include &lt;pylon/PylonIncludes.h&gt;</span></div><div class="line"><span class="preprocessor">#ifdef PYLON_WIN_BUILD</span></div><div class="line"><span class="preprocessor">#  include &lt;pylon/PylonGUI.h&gt;</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="comment">// Extend the pylon API for using pylon data processing</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_pylon_data_processing_includes_8h.html">pylondataprocessing/PylonDataProcessingIncludes.h</a>&gt;</span></div><div class="line"><span class="comment">// The sample uses the std::list</span></div><div class="line"><span class="preprocessor">#include &lt;list&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// Namespaces for using pylon objects</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespace_pylon.html">Pylon</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespace_pylon_1_1_data_processing.html">Pylon::DataProcessing</a>;</div><div class="line"></div><div class="line"><span class="comment">// Namespace for using cout</span></div><div class="line"><span class="keyword">using namespace </span>std;</div><div class="line"></div><div class="line"><span class="comment">// Number of images to be grabbed</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> uint32_t c_countOfImagesToGrab = 100;</div><div class="line"></div><div class="line"><span class="comment">// Declare a data class for one set of output data values.</span></div><div class="line"><span class="keyword">class </span>ResultData</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    ResultData()</div><div class="line">        : hasError(false)</div><div class="line">    {</div><div class="line">    }</div><div class="line"></div><div class="line">    CPylonImage image; <span class="comment">// The image from the camera</span></div><div class="line"></div><div class="line">    <span class="keywordtype">bool</span> hasError;     <span class="comment">// If something doesn&#39;t work as expected</span></div><div class="line">                       <span class="comment">// while processing data, this is set to true.</span></div><div class="line"></div><div class="line">    String_t errorMessage; <span class="comment">// Contains an error message if</span></div><div class="line">                           <span class="comment">// hasError has been set to true.</span></div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// MyOutputObserver is a helper object that shows how to handle output data</span></div><div class="line"><span class="comment">// provided via the IOutputObserver::OutputDataPush interface method.</span></div><div class="line"><span class="comment">// Also, MyOutputObserver shows how a thread-safe queue can be implemented</span></div><div class="line"><span class="comment">// for later processing while pulling the output data.</span></div><div class="line"><span class="keyword">class </span>MyOutputObserver : <span class="keyword">public</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_i_output_observer.html">IOutputObserver</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    MyOutputObserver()</div><div class="line">        : m_waitObject(WaitObjectEx::Create())</div><div class="line">    {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Implements IOutputObserver::OutputDataPush.</span></div><div class="line">    <span class="comment">// This method is called when an output of the CRecipe pushes data out.</span></div><div class="line">    <span class="comment">// The call of the method can be performed by any thread of the thread pool of the recipe.</span></div><div class="line">    <span class="keywordtype">void</span> OutputDataPush(</div><div class="line">        <a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html">CRecipe</a>&amp; recipe,</div><div class="line">        <a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html">CVariantContainer</a> valueContainer,</div><div class="line">        <span class="keyword">const</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_c_update.html">CUpdate</a>&amp; update,</div><div class="line">        intptr_t userProvidedId)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="comment">// The following variables are not used here:</span></div><div class="line">        PYLON_UNUSED(recipe);</div><div class="line">        PYLON_UNUSED(update);</div><div class="line">        PYLON_UNUSED(userProvidedId);</div><div class="line"></div><div class="line">        ResultData currentResultData;</div><div class="line"></div><div class="line">        <span class="comment">// Get the data provided by the recipe output pin &quot;Image&quot;.</span></div><div class="line">        <span class="comment">// The value container is a dictionary/map-like type.</span></div><div class="line">        <span class="comment">// Look for the key in the dictionary.</span></div><div class="line">        <span class="keyword">auto</span> pos = valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a3fc44da2584b1753851f771cc082f784">find</a>(<span class="stringliteral">&quot;Image&quot;</span>);</div><div class="line">        <span class="comment">// We expect there to be an image</span></div><div class="line">        <span class="comment">// because this is the the only output pin of this recipe.</span></div><div class="line">        PYLON_ASSERT(pos != valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a4e2a26a76dcac9cd1ba3b05f614c26dc">end</a>());</div><div class="line">        <span class="keywordflow">if</span> (pos != valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a4e2a26a76dcac9cd1ba3b05f614c26dc">end</a>())</div><div class="line">        {</div><div class="line">            <span class="comment">// Now we can use the value of the key/value pair.</span></div><div class="line">            <span class="keyword">const</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html">CVariant</a>&amp; value = pos-&gt;second;</div><div class="line">            <span class="keywordflow">if</span> (!value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a1a11c43851cb3a1945283c1ca0e3f192">HasError</a>())</div><div class="line">            {</div><div class="line">                currentResultData.image = value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a90581ad4abe467c96797cf5929d91c16">ToImage</a>();</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                currentResultData.hasError = <span class="keyword">true</span>;</div><div class="line">                currentResultData.errorMessage = value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ae7ee85a5e64c1928c59c257fc1422f0a">GetErrorDescription</a>();</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="comment">// Add data to the result queue in a thread-safe way.</span></div><div class="line">        {</div><div class="line">            AutoLock scopedLock(m_memberLock);</div><div class="line">            m_queue.emplace_back(currentResultData);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Signal that data is ready.</span></div><div class="line">        m_waitObject.Signal();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Get the wait object for waiting for data.</span></div><div class="line">    <span class="keyword">const</span> WaitObject&amp; GetWaitObject()</div><div class="line">    {</div><div class="line">        <span class="keywordflow">return</span> m_waitObject;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Get one result data object from the queue.</span></div><div class="line">    <span class="keywordtype">bool</span> GetResultData(ResultData&amp; resultDataOut)</div><div class="line">    {</div><div class="line">        AutoLock scopedLock(m_memberLock);</div><div class="line">        <span class="keywordflow">if</span> (m_queue.empty())</div><div class="line">        {</div><div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        resultDataOut = std::move(m_queue.front());</div><div class="line">        m_queue.pop_front();</div><div class="line">        <span class="keywordflow">if</span> (m_queue.empty())</div><div class="line">        {</div><div class="line">            m_waitObject.Reset();</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    CLock m_memberLock;        <span class="comment">// The member lock is required to ensure</span></div><div class="line">                               <span class="comment">// thread-safe access to the member variables.</span></div><div class="line">    WaitObjectEx m_waitObject; <span class="comment">// Signals that ResultData is available.</span></div><div class="line">                               <span class="comment">// It is set when m_queue is not empty.</span></div><div class="line">    list&lt;ResultData&gt; m_queue;  <span class="comment">// The queue of ResultData</span></div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> <span class="comment">/*argc*/</span>, <span class="keywordtype">char</span>* <span class="comment">/*argv*/</span>[])</div><div class="line">{</div><div class="line">    <span class="comment">// The exit code of the sample application.</span></div><div class="line">    <span class="keywordtype">int</span> exitCode = 0;</div><div class="line"></div><div class="line">    <span class="comment">// Enable the pylon camera emulator for grabbing images from disk</span></div><div class="line">    <span class="comment">// by setting the necessary environment variable.</span></div><div class="line"><span class="preprocessor">#if defined(PYLON_WIN_BUILD)</span></div><div class="line">    _putenv(<span class="stringliteral">&quot;PYLON_CAMEMU=1&quot;</span>);</div><div class="line"><span class="preprocessor">#elif defined(PYLON_UNIX_BUILD)</span></div><div class="line">    setenv(<span class="stringliteral">&quot;PYLON_CAMEMU&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="keyword">true</span>);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">    <span class="comment">// Before using any pylon methods, the pylon runtime must be initialized.</span></div><div class="line">    PylonInitialize();</div><div class="line"></div><div class="line">    <span class="keywordflow">try</span></div><div class="line">    {</div><div class="line">        <span class="comment">// This object is used for collecting the output data.</span></div><div class="line">        <span class="comment">// If placed on the stack it must be created before the recipe</span></div><div class="line">        <span class="comment">// so that it is destroyed after the recipe.</span></div><div class="line">        MyOutputObserver resultCollector;</div><div class="line"></div><div class="line">        <span class="comment">// Create a recipe representing a design created using</span></div><div class="line">        <span class="comment">// the pylon Viewer Workbench.</span></div><div class="line">        <a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html">CRecipe</a> recipe;</div><div class="line"></div><div class="line">        <span class="comment">// Load the recipe file.</span></div><div class="line">        <span class="comment">// Note: PYLON_DATAPROCESSING_CAMERA_RECIPE is a string</span></div><div class="line">        <span class="comment">// created by the CMake build files.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#ade704260929c747515bb726e7f29612f">Load</a>(PYLON_DATAPROCESSING_CAMERA_RECIPE);</div><div class="line"></div><div class="line">        <span class="comment">// For demonstration purposes only</span></div><div class="line">        <span class="comment">// Let&#39;s check the Pylon::CDeviceInfo properties of the camera we are going to use.</span></div><div class="line">        <span class="comment">// Basler recommends using the DeviceClass and the UserDefinedName to identify a camera.</span></div><div class="line">        <span class="comment">// The UserDefinedName is taken from the DeviceUserID parameter that you can set in the pylon Viewer&#39;s Features pane.</span></div><div class="line">        <span class="comment">// Note: USB cameras must be disconnected and reconnected or reset to provide the new DeviceUserID.</span></div><div class="line">        <span class="comment">// This is due to restrictions defined by the USB standard.</span></div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Properties used for selecting a camera device&quot;</span> &lt;&lt; endl;</div><div class="line">        CIntegerParameter devicePropertySelector = </div><div class="line">            recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a6e67cf77c109f3f48f96ccc356cc20d9">GetParameters</a>().<a class="code" href="struct_pylon_1_1_data_processing_1_1_i_parameter_collection.html#a65b80c3531860c3620ac0bb99c37f1e7">Get</a>(<a class="code" href="struct_pylon_1_1_data_processing_1_1_integer_parameter_name.html">IntegerParameterName</a>(<span class="stringliteral">&quot;MyCamera/@vTool/DevicePropertySelector&quot;</span>));</div><div class="line">        <span class="keywordflow">if</span> (devicePropertySelector.IsWritable())</div><div class="line">        {</div><div class="line">            CStringParameter deviceKey = recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a6e67cf77c109f3f48f96ccc356cc20d9">GetParameters</a>().<a class="code" href="struct_pylon_1_1_data_processing_1_1_i_parameter_collection.html#a65b80c3531860c3620ac0bb99c37f1e7">Get</a>(<a class="code" href="struct_pylon_1_1_data_processing_1_1_string_parameter_name.html">StringParameterName</a>(<span class="stringliteral">&quot;MyCamera/@vTool/DevicePropertyKey&quot;</span>));</div><div class="line">            CStringParameter deviceValue = recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a6e67cf77c109f3f48f96ccc356cc20d9">GetParameters</a>().<a class="code" href="struct_pylon_1_1_data_processing_1_1_i_parameter_collection.html#a65b80c3531860c3620ac0bb99c37f1e7">Get</a>(<a class="code" href="struct_pylon_1_1_data_processing_1_1_string_parameter_name.html">StringParameterName</a>(<span class="stringliteral">&quot;MyCamera/@vTool/DevicePropertyValue&quot;</span>));</div><div class="line">            <span class="keywordflow">for</span> (int64_t i = devicePropertySelector.GetMin(); i &lt;= devicePropertySelector.GetMax(); ++i)</div><div class="line">            {</div><div class="line">                devicePropertySelector.SetValue(i);</div><div class="line">                cout &lt;&lt; deviceKey.GetValue() &lt;&lt; <span class="stringliteral">&quot;=&quot;</span> &lt;&lt; deviceValue.GetValue() &lt;&lt; endl;</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;The first camera device found is used.&quot;</span> &lt;&lt; endl;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// For demonstration purposes only</span></div><div class="line">        <span class="comment">// Print available parameters.</span></div><div class="line">        {</div><div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Parameter names before allocating resources&quot;</span> &lt;&lt; endl;</div><div class="line">            StringList_t parameterNames = recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a6e67cf77c109f3f48f96ccc356cc20d9">GetParameters</a>().<a class="code" href="struct_pylon_1_1_data_processing_1_1_i_parameter_collection.html#ab7d9a78246ba41148e8b24a10d43c24c">GetAllParameterNames</a>();</div><div class="line">            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; name : parameterNames)</div><div class="line">            {</div><div class="line">                cout &lt;&lt; name &lt;&lt; endl;</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Allocate the required resources. This includes the camera device.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#ade90b70669f92e86760d60c20a5be771">PreAllocateResources</a>();</div><div class="line"></div><div class="line">        <span class="comment">// For demonstration purposes only</span></div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Selected camera device:&quot;</span> &lt;&lt; endl;</div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;ModelName=&quot;</span> &lt;&lt; recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a6e67cf77c109f3f48f96ccc356cc20d9">GetParameters</a>().<a class="code" href="struct_pylon_1_1_data_processing_1_1_i_parameter_collection.html#a65b80c3531860c3620ac0bb99c37f1e7">Get</a>(<a class="code" href="struct_pylon_1_1_data_processing_1_1_string_parameter_name.html">StringParameterName</a>(<span class="stringliteral">&quot;MyCamera/@vTool/SelectedDeviceModelName&quot;</span>)).GetValueOrDefault(<span class="stringliteral">&quot;N/A&quot;</span>) &lt;&lt; std::endl;</div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;SerialNumber=&quot;</span> &lt;&lt; recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a6e67cf77c109f3f48f96ccc356cc20d9">GetParameters</a>().<a class="code" href="struct_pylon_1_1_data_processing_1_1_i_parameter_collection.html#a65b80c3531860c3620ac0bb99c37f1e7">Get</a>(<a class="code" href="struct_pylon_1_1_data_processing_1_1_string_parameter_name.html">StringParameterName</a>(<span class="stringliteral">&quot;MyCamera/@vTool/SelectedDeviceSerialNumber&quot;</span>)).GetValueOrDefault(<span class="stringliteral">&quot;N/A&quot;</span>) &lt;&lt; std::endl;</div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;VendorName=&quot;</span> &lt;&lt; recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a6e67cf77c109f3f48f96ccc356cc20d9">GetParameters</a>().<a class="code" href="struct_pylon_1_1_data_processing_1_1_i_parameter_collection.html#a65b80c3531860c3620ac0bb99c37f1e7">Get</a>(<a class="code" href="struct_pylon_1_1_data_processing_1_1_string_parameter_name.html">StringParameterName</a>(<span class="stringliteral">&quot;MyCamera/@vTool/SelectedDeviceVendorName&quot;</span>)).GetValueOrDefault(<span class="stringliteral">&quot;N/A&quot;</span>) &lt;&lt; std::endl;</div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;UserDefinedName=&quot;</span> &lt;&lt; recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a6e67cf77c109f3f48f96ccc356cc20d9">GetParameters</a>().<a class="code" href="struct_pylon_1_1_data_processing_1_1_i_parameter_collection.html#a65b80c3531860c3620ac0bb99c37f1e7">Get</a>(<a class="code" href="struct_pylon_1_1_data_processing_1_1_string_parameter_name.html">StringParameterName</a>(<span class="stringliteral">&quot;MyCamera/@vTool/SelectedDeviceUserDefinedName&quot;</span>)).GetValueOrDefault(<span class="stringliteral">&quot;N/A&quot;</span>) &lt;&lt; std::endl;</div><div class="line">        <span class="comment">// StringParameterName is the type of the parameter.</span></div><div class="line">        <span class="comment">// MyCamera is the name of the vTool.</span></div><div class="line">        <span class="comment">// Use @vTool if you want to access the vTool parameters.</span></div><div class="line">        <span class="comment">// Use @CameraInstance if you want to access the parameters of the CInstantCamera object used internally.</span></div><div class="line">        <span class="comment">// Use @DeviceTransportLayer if you want to access the transport layer parameters.</span></div><div class="line">        <span class="comment">// Use @CameraDevice if you want to access the camera device parameters.</span></div><div class="line">        <span class="comment">// Use @StreamGrabber0 if you want to access the camera device parameters.</span></div><div class="line">        <span class="comment">// SelectedDeviceUserDefinedName is the name of the parameter.</span></div><div class="line"></div><div class="line">        <span class="comment">// For demonstration purposes only</span></div><div class="line">        <span class="comment">// Print available parameters after allocating resources. Now we can access the camera parameters.</span></div><div class="line">        {</div><div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Parameter names after allocating resources&quot;</span> &lt;&lt; endl;</div><div class="line">            StringList_t parameterNames = recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a6e67cf77c109f3f48f96ccc356cc20d9">GetParameters</a>().<a class="code" href="struct_pylon_1_1_data_processing_1_1_i_parameter_collection.html#ab7d9a78246ba41148e8b24a10d43c24c">GetAllParameterNames</a>();</div><div class="line">            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; name : parameterNames)</div><div class="line">            {</div><div class="line">                cout &lt;&lt; name &lt;&lt; endl;</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">// For demonstration purposes only</span></div><div class="line">        <span class="comment">// Print available output names.</span></div><div class="line">        StringList_t outputNames;</div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#acf24f812c92e0dda89e100c61699f7e4">GetOutputNames</a>(outputNames);</div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; outputName : outputNames)</div><div class="line">        {</div><div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Output found: &quot;</span> &lt;&lt; outputName &lt;&lt; std::endl;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Register the helper object for receiving all output data.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a39eb91753ef439806df763f3812ab739">RegisterAllOutputsObserver</a>(&amp;resultCollector, RegistrationMode_Append);</div><div class="line"></div><div class="line">        <span class="comment">// Start the processing. The recipe is triggered internally</span></div><div class="line">        <span class="comment">// by the camera vTool for each image.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a3a89e0690875436aa185b22854cd8747">Start</a>();</div><div class="line"></div><div class="line">        <span class="keywordtype">int</span> count = 0;</div><div class="line">        <span class="keywordtype">bool</span> testImage1 = <span class="keyword">true</span>;</div><div class="line">        CEnumParameter testImageSelector =</div><div class="line">            recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a6e67cf77c109f3f48f96ccc356cc20d9">GetParameters</a>().<a class="code" href="struct_pylon_1_1_data_processing_1_1_i_parameter_collection.html#a65b80c3531860c3620ac0bb99c37f1e7">Get</a>(<a class="code" href="struct_pylon_1_1_data_processing_1_1_enum_parameter_name.html">EnumParameterName</a>(<span class="stringliteral">&quot;MyCamera/@CameraDevice/TestImageSelector&quot;</span>));</div><div class="line">        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; c_countOfImagesToGrab; ++i)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (resultCollector.GetWaitObject().Wait(5000))</div><div class="line">            {</div><div class="line">                ResultData result;</div><div class="line">                resultCollector.GetResultData(result);</div><div class="line">                <span class="keywordflow">if</span> (!result.hasError)</div><div class="line">                {</div><div class="line">                    <span class="comment">// Access the image data.</span></div><div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;SizeX: &quot;</span> &lt;&lt; result.image.GetWidth() &lt;&lt; endl;</div><div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;SizeY: &quot;</span> &lt;&lt; result.image.GetHeight() &lt;&lt; endl;</div><div class="line">                    <span class="keyword">const</span> uint8_t* pImageBuffer = (uint8_t*)result.image.GetBuffer();</div><div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Gray value of first pixel: &quot;</span> &lt;&lt; (uint32_t)pImageBuffer[0] &lt;&lt; endl &lt;&lt; endl;</div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef PYLON_WIN_BUILD</span></div><div class="line">                    DisplayImage(1, result.image);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;An error occurred in processing: &quot;</span> &lt;&lt; result.errorMessage &lt;&lt; endl;</div><div class="line">                }</div><div class="line"></div><div class="line">                ++count;</div><div class="line"></div><div class="line">                <span class="comment">// Now let&#39;s change a parameter every 10 images</span></div><div class="line">                <span class="comment">// while grabbing is active.</span></div><div class="line">                <span class="keywordflow">if</span> (0 == count % 10)</div><div class="line">                {</div><div class="line">                    testImage1 = !testImage1;</div><div class="line">                    <span class="keywordflow">if</span> (testImage1)</div><div class="line">                    {</div><div class="line">                        testImageSelector.SetValue(<span class="stringliteral">&quot;Testimage1&quot;</span>);</div><div class="line">                    }</div><div class="line">                    <span class="keywordflow">else</span></div><div class="line">                    {</div><div class="line">                        testImageSelector.SetValue(<span class="stringliteral">&quot;Testimage2&quot;</span>);</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                <span class="keywordflow">throw</span> RUNTIME_EXCEPTION(<span class="stringliteral">&quot;Result timeout&quot;</span>);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Stop the processing.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a5aac836a86698a2899f1db0cdaaef420">Stop</a>();</div><div class="line"></div><div class="line">        <span class="comment">// Optionally, deallocate resources.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a56ccde1d97df744b229e737b737c8d09">DeallocateResources</a>();</div><div class="line">    }</div><div class="line">    <span class="keywordflow">catch</span> (<span class="keyword">const</span> GenericException&amp; e)</div><div class="line">    {</div><div class="line">        <span class="comment">// Error handling.</span></div><div class="line">        cerr &lt;&lt; <span class="stringliteral">&quot;An exception occurred.&quot;</span> &lt;&lt; endl &lt;&lt; e.GetDescription() &lt;&lt; endl;</div><div class="line">        exitCode = 1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Comment the following two lines to disable waiting on exit.</span></div><div class="line">    cerr &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Press enter to exit.&quot;</span> &lt;&lt; endl;</div><div class="line">    <span class="keywordflow">while</span> (cin.get() != <span class="charliteral">&#39;\n&#39;</span>)</div><div class="line">        ;</div><div class="line"></div><div class="line">    <span class="comment">// Releases all pylon resources.</span></div><div class="line">    PylonTerminate();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> exitCode;</div><div class="line">}</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">    Sample using the Barcode vTool (license required)</span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="comment">// Include files to use the pylon API.</span></div><div class="line"><span class="preprocessor">#include &lt;pylon/PylonIncludes.h&gt;</span></div><div class="line"><span class="preprocessor">#ifdef PYLON_WIN_BUILD</span></div><div class="line"><span class="preprocessor">#  include &lt;pylon/PylonGUI.h&gt;</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="comment">// Extend the pylon API for using pylon data processing.</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_pylon_data_processing_includes_8h.html">pylondataprocessing/PylonDataProcessingIncludes.h</a>&gt;</span></div><div class="line"><span class="comment">// The sample uses the std::list.</span></div><div class="line"><span class="preprocessor">#include &lt;list&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// Namespaces for using pylon objects</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespace_pylon.html">Pylon</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespace_pylon_1_1_data_processing.html">Pylon::DataProcessing</a>;</div><div class="line"></div><div class="line"><span class="comment">// Namespace for using cout</span></div><div class="line"><span class="keyword">using namespace </span>std;</div><div class="line"></div><div class="line"><span class="comment">// Number of images to be grabbed</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> uint32_t c_countOfImagesToGrab = 100;</div><div class="line"></div><div class="line"><span class="comment">// Declare a data class for one set of output data values.</span></div><div class="line"><span class="keyword">class </span>ResultData</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    ResultData()</div><div class="line">        : hasError(false)</div><div class="line">    {</div><div class="line">    }</div><div class="line"></div><div class="line">    CPylonImage image; <span class="comment">// The image from the camera</span></div><div class="line"></div><div class="line">    StringList_t decodedBarcodes; <span class="comment">// The decoded barcodes</span></div><div class="line"></div><div class="line">    <span class="keywordtype">bool</span> hasError;     <span class="comment">// If something doesn&#39;t work as expected</span></div><div class="line">                       <span class="comment">// while processing data, this is set to true.</span></div><div class="line"></div><div class="line">    String_t errorMessage; <span class="comment">// Contains an error message if</span></div><div class="line">                           <span class="comment">// hasError has been set to true.</span></div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">// MyOutputObserver is a helper object that shows how to handle output data</span></div><div class="line"><span class="comment">// provided via the IOutputObserver::OutputDataPush interface method.</span></div><div class="line"><span class="comment">// Also, MyOutputObserver shows how a thread-safe queue can be implemented</span></div><div class="line"><span class="comment">// for later processing while pulling the output data.</span></div><div class="line"><span class="keyword">class </span>MyOutputObserver : <span class="keyword">public</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_i_output_observer.html">IOutputObserver</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    MyOutputObserver()</div><div class="line">        : m_waitObject(WaitObjectEx::Create())</div><div class="line">    {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Implements IOutputObserver::OutputDataPush.</span></div><div class="line">    <span class="comment">// This method is called when an output of the CRecipe pushes data out.</span></div><div class="line">    <span class="comment">// The call of the method can be performed by any thread of the thread pool of the recipe.</span></div><div class="line">    <span class="keywordtype">void</span> OutputDataPush(</div><div class="line">        <a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html">CRecipe</a>&amp; recipe,</div><div class="line">        <a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html">CVariantContainer</a> valueContainer,</div><div class="line">        <span class="keyword">const</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_c_update.html">CUpdate</a>&amp; update,</div><div class="line">        intptr_t userProvidedId)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="comment">// The following variables are not used here:</span></div><div class="line">        PYLON_UNUSED(recipe);</div><div class="line">        PYLON_UNUSED(update);</div><div class="line">        PYLON_UNUSED(userProvidedId);</div><div class="line"></div><div class="line">        ResultData currentResultData;</div><div class="line"></div><div class="line">        <span class="comment">// Get the result data of the recipe via the output terminal&#39;s &quot;Image&quot; pin.</span></div><div class="line">        <span class="comment">// The value container is a dictionary/map-like type.</span></div><div class="line">        <span class="comment">// Look for the key in the dictionary.</span></div><div class="line">        <span class="keyword">auto</span> posImage = valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a3fc44da2584b1753851f771cc082f784">find</a>(<span class="stringliteral">&quot;Image&quot;</span>);</div><div class="line">        <span class="comment">// We expect there to be an image</span></div><div class="line">        <span class="comment">// because the recipe is set up to behave like this.</span></div><div class="line">        PYLON_ASSERT(posImage != valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a4e2a26a76dcac9cd1ba3b05f614c26dc">end</a>());</div><div class="line">        <span class="keywordflow">if</span> (posImage != valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a4e2a26a76dcac9cd1ba3b05f614c26dc">end</a>())</div><div class="line">        {</div><div class="line">            <span class="comment">// Now we can use the value of the key/value pair.</span></div><div class="line">            <span class="keyword">const</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html">CVariant</a>&amp; value = posImage-&gt;second;</div><div class="line">            <span class="keywordflow">if</span> (!value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a1a11c43851cb3a1945283c1ca0e3f192">HasError</a>())</div><div class="line">            {</div><div class="line">                currentResultData.image = value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a90581ad4abe467c96797cf5929d91c16">ToImage</a>();</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                currentResultData.hasError = <span class="keyword">true</span>;</div><div class="line">                currentResultData.errorMessage = value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ae7ee85a5e64c1928c59c257fc1422f0a">GetErrorDescription</a>();</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Get the data from the Barcodes pin.</span></div><div class="line">        <span class="keyword">auto</span> posBarcodes = valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a3fc44da2584b1753851f771cc082f784">find</a>(<span class="stringliteral">&quot;Barcodes&quot;</span>);</div><div class="line">        PYLON_ASSERT(posBarcodes != valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a4e2a26a76dcac9cd1ba3b05f614c26dc">end</a>());</div><div class="line">        <span class="keywordflow">if</span> (posBarcodes != valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a4e2a26a76dcac9cd1ba3b05f614c26dc">end</a>())</div><div class="line">        {</div><div class="line">            <span class="keyword">const</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html">CVariant</a>&amp; value = posBarcodes-&gt;second;</div><div class="line">            <span class="keywordflow">if</span> (!value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a1a11c43851cb3a1945283c1ca0e3f192">HasError</a>())</div><div class="line">            {</div><div class="line">                <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a2c47666d4736fa01378f9cc4ee2a3c74">GetNumArrayValues</a>(); ++i)</div><div class="line">                {</div><div class="line">                    <span class="keyword">const</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html">CVariant</a> decodedBarcodeValue = value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a13e94078a3eb15064632d67d822accf4">GetArrayValue</a>(i);</div><div class="line">                    <span class="keywordflow">if</span> (!decodedBarcodeValue.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a1a11c43851cb3a1945283c1ca0e3f192">HasError</a>())</div><div class="line">                    {</div><div class="line">                        currentResultData.decodedBarcodes.push_back(decodedBarcodeValue.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#aa014843ae37816d314bca1a4e81ea6e8">ToString</a>());</div><div class="line">                    }</div><div class="line">                    <span class="keywordflow">else</span></div><div class="line">                    {</div><div class="line">                        currentResultData.hasError = <span class="keyword">true</span>;</div><div class="line">                        currentResultData.errorMessage = value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ae7ee85a5e64c1928c59c257fc1422f0a">GetErrorDescription</a>();</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                currentResultData.hasError = <span class="keyword">true</span>;</div><div class="line">                currentResultData.errorMessage = value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ae7ee85a5e64c1928c59c257fc1422f0a">GetErrorDescription</a>();</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Add data to the result queue in a thread-safe way.</span></div><div class="line">        {</div><div class="line">            AutoLock scopedLock(m_memberLock);</div><div class="line">            m_queue.emplace_back(currentResultData);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Signal that data is ready.</span></div><div class="line">        m_waitObject.Signal();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Get the wait object for waiting for data.</span></div><div class="line">    <span class="keyword">const</span> WaitObject&amp; GetWaitObject()</div><div class="line">    {</div><div class="line">        <span class="keywordflow">return</span> m_waitObject;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Get one result data object from the queue.</span></div><div class="line">    <span class="keywordtype">bool</span> GetResultData(ResultData&amp; resultDataOut)</div><div class="line">    {</div><div class="line">        AutoLock scopedLock(m_memberLock);</div><div class="line">        <span class="keywordflow">if</span> (m_queue.empty())</div><div class="line">        {</div><div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        resultDataOut = std::move(m_queue.front());</div><div class="line">        m_queue.pop_front();</div><div class="line">        <span class="keywordflow">if</span> (m_queue.empty())</div><div class="line">        {</div><div class="line">            m_waitObject.Reset();</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    CLock m_memberLock;        <span class="comment">// The member lock is required to ensure</span></div><div class="line">                               <span class="comment">// thread-safe access to the member variables.</span></div><div class="line">    WaitObjectEx m_waitObject; <span class="comment">// Signals that ResultData is available.</span></div><div class="line">                               <span class="comment">// It is set if m_queue is not empty.</span></div><div class="line">    list&lt;ResultData&gt; m_queue;  <span class="comment">// The queue of ResultData</span></div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> <span class="comment">/*argc*/</span>, <span class="keywordtype">char</span>* <span class="comment">/*argv*/</span>[])</div><div class="line">{</div><div class="line">    <span class="comment">// The exit code of the sample application.</span></div><div class="line">    <span class="keywordtype">int</span> exitCode = 0;</div><div class="line"></div><div class="line">    <span class="comment">// Enable the pylon camera emulator to provide images from disk</span></div><div class="line">    <span class="comment">// by setting the necessary environment variable.</span></div><div class="line"><span class="preprocessor">#if defined(PYLON_WIN_BUILD)</span></div><div class="line">    _putenv(<span class="stringliteral">&quot;PYLON_CAMEMU=1&quot;</span>);</div><div class="line"><span class="preprocessor">#elif defined(PYLON_UNIX_BUILD)</span></div><div class="line">    setenv(<span class="stringliteral">&quot;PYLON_CAMEMU&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="keyword">true</span>);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">    <span class="comment">// Before using any pylon methods, the pylon runtime must be initialized.</span></div><div class="line">    PylonInitialize();</div><div class="line"></div><div class="line">    <span class="keywordflow">try</span></div><div class="line">    {</div><div class="line">        <span class="comment">// This object is used for collecting the output data.</span></div><div class="line">        <span class="comment">// If placed on the stack, it must be created before the recipe</span></div><div class="line">        <span class="comment">// so that it is destroyed after the recipe.</span></div><div class="line">        MyOutputObserver resultCollector;</div><div class="line"></div><div class="line">        <span class="comment">// Create a recipe object representing a recipe file created using</span></div><div class="line">        <span class="comment">// the pylon Viewer Workbench.</span></div><div class="line">        <a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html">CRecipe</a> recipe;</div><div class="line"></div><div class="line">        <span class="comment">// Load the recipe file.</span></div><div class="line">        <span class="comment">// Note: PYLON_DATAPROCESSING_BARCODE_RECIPE is a string</span></div><div class="line">        <span class="comment">// created by the CMake build files.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#ade704260929c747515bb726e7f29612f">Load</a>(PYLON_DATAPROCESSING_BARCODE_RECIPE);</div><div class="line"></div><div class="line">        <span class="comment">// Now we allocate all resources we need. This includes the camera device.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#ade90b70669f92e86760d60c20a5be771">PreAllocateResources</a>();</div><div class="line"></div><div class="line">        <span class="comment">// Set up correct image path to samples.</span></div><div class="line">        <span class="comment">// Note: PYLON_DATAPROCESSING_IMAGES_PATH is a string created by the CMake build files.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a6e67cf77c109f3f48f96ccc356cc20d9">GetParameters</a>().<a class="code" href="struct_pylon_1_1_data_processing_1_1_i_parameter_collection.html#a65b80c3531860c3620ac0bb99c37f1e7">Get</a>(<a class="code" href="struct_pylon_1_1_data_processing_1_1_string_parameter_name.html">StringParameterName</a>(<span class="stringliteral">&quot;MyCamera/@CameraDevice/ImageFilename&quot;</span>)).SetValue(PYLON_DATAPROCESSING_IMAGES_PATH);</div><div class="line"></div><div class="line">        <span class="comment">// This is where the output goes.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a39eb91753ef439806df763f3812ab739">RegisterAllOutputsObserver</a>(&amp;resultCollector, RegistrationMode_Append);</div><div class="line"></div><div class="line">        <span class="comment">// Start the processing.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a3a89e0690875436aa185b22854cd8747">Start</a>();</div><div class="line"></div><div class="line">        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; c_countOfImagesToGrab; ++i)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (resultCollector.GetWaitObject().Wait(5000))</div><div class="line">            {</div><div class="line">                ResultData result;</div><div class="line">                resultCollector.GetResultData(result);</div><div class="line">                <span class="keywordflow">if</span> (!result.hasError)</div><div class="line">                {</div><div class="line">                    <span class="comment">// Access the image data.</span></div><div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;SizeX: &quot;</span> &lt;&lt; result.image.GetWidth() &lt;&lt; endl;</div><div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;SizeY: &quot;</span> &lt;&lt; result.image.GetHeight() &lt;&lt; endl;</div><div class="line">                    <span class="keyword">const</span> uint8_t* pImageBuffer = (uint8_t*)result.image.GetBuffer();</div><div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Gray value of first pixel: &quot;</span> &lt;&lt; (uint32_t)pImageBuffer[0] &lt;&lt; endl &lt;&lt; endl;</div><div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Barcodes:&quot;</span> &lt;&lt; endl;</div><div class="line">                    <span class="keywordtype">int</span> index = 1;</div><div class="line">                    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; barcode : result.decodedBarcodes)</div><div class="line">                    {</div><div class="line">                        cout &lt;&lt; index &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; barcode &lt;&lt; endl;</div><div class="line">                        index++;</div><div class="line">                    }</div><div class="line">                    cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; endl;</div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef PYLON_WIN_BUILD</span></div><div class="line">                    DisplayImage(1, result.image);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;An error occurred during processing: &quot;</span> &lt;&lt; result.errorMessage &lt;&lt; endl;</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                <span class="keywordflow">throw</span> RUNTIME_EXCEPTION(<span class="stringliteral">&quot;Result timeout&quot;</span>);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Stop the processing.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a5aac836a86698a2899f1db0cdaaef420">Stop</a>();</div><div class="line">    }</div><div class="line">    <span class="keywordflow">catch</span> (<span class="keyword">const</span> GenericException&amp; e)</div><div class="line">    {</div><div class="line">        <span class="comment">// Error handling</span></div><div class="line">        cerr &lt;&lt; <span class="stringliteral">&quot;An exception occurred.&quot;</span> &lt;&lt; endl &lt;&lt; e.GetDescription() &lt;&lt; endl;</div><div class="line">        exitCode = 1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Comment the following two lines to disable waiting on exit.</span></div><div class="line">    cerr &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Press enter to exit.&quot;</span> &lt;&lt; endl;</div><div class="line">    <span class="keywordflow">while</span> (cin.get() != <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Releases all pylon resources.</span></div><div class="line">    PylonTerminate();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> exitCode;</div><div class="line">}</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">    Sample using the composite data types (license required)</span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="comment">// Include files to use the pylon API.</span></div><div class="line"><span class="preprocessor">#include &lt;pylon/PylonIncludes.h&gt;</span></div><div class="line"><span class="preprocessor">#ifdef PYLON_WIN_BUILD</span></div><div class="line"><span class="preprocessor">#  include &lt;pylon/PylonGUI.h&gt;</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="comment">// Extend the pylon API for using pylon data processing.</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_pylon_data_processing_includes_8h.html">pylondataprocessing/PylonDataProcessingIncludes.h</a>&gt;</span></div><div class="line"><span class="comment">// The sample uses the std::list.</span></div><div class="line"><span class="preprocessor">#include &lt;list&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// Namespaces for using pylon objects</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespace_pylon.html">Pylon</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespace_pylon_1_1_data_processing.html">Pylon::DataProcessing</a>;</div><div class="line"></div><div class="line"><span class="comment">// Namespace for using cout</span></div><div class="line"><span class="keyword">using namespace </span>std;</div><div class="line"></div><div class="line"><span class="comment">// Number of images to be grabbed</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> uint32_t c_countOfImagesToGrab = 24;</div><div class="line"></div><div class="line"><span class="comment">// Declare a data class for one set of output data values.</span></div><div class="line"><span class="keyword">class </span>ResultData</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    ResultData()</div><div class="line">        : hasError(false)</div><div class="line">    {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Simple struct to store the data of the composite data type</span></div><div class="line">    <span class="keyword">struct </span>RectangleF</div><div class="line">    {</div><div class="line">        <span class="keywordtype">double</span>      centerX     = 0.;</div><div class="line">        <span class="keywordtype">double</span>      centerY     = 0.;</div><div class="line">        uint64_t    width       = 0;</div><div class="line">        uint64_t    height      = 0;</div><div class="line">        <span class="keywordtype">double</span>      rotation    = 0.;</div><div class="line">    };</div><div class="line"></div><div class="line">    CPylonImage         image; <span class="comment">// The image is only used for displaying</span></div><div class="line">    list&lt;RectangleF&gt;    boxes; <span class="comment">// List of bounding boxes</span></div><div class="line"></div><div class="line">    <span class="keywordtype">bool</span> hasError;     <span class="comment">// If something doesn&#39;t work as expected</span></div><div class="line">                       <span class="comment">// while processing data, this is set to true.</span></div><div class="line"></div><div class="line">    String_t errorMessage; <span class="comment">// Contains an error message if</span></div><div class="line">                           <span class="comment">// hasError has been set to true.</span></div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">// MyOutputObserver is a helper object that shows how to handle output data</span></div><div class="line"><span class="comment">// provided via the IOutputObserver::OutputDataPush interface method.</span></div><div class="line"><span class="comment">// Also, MyOutputObserver shows how a thread-safe queue can be implemented</span></div><div class="line"><span class="comment">// for later processing while pulling the output data.</span></div><div class="line"><span class="keyword">class </span>MyOutputObserver : <span class="keyword">public</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_i_output_observer.html">IOutputObserver</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    MyOutputObserver()</div><div class="line">        : m_waitObject(WaitObjectEx::Create())</div><div class="line">    {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Implements IOutputObserver::OutputDataPush.</span></div><div class="line">    <span class="comment">// This method is called when an output of the CRecipe pushes data out.</span></div><div class="line">    <span class="comment">// The call of the method can be performed by any thread of the thread pool of the recipe.</span></div><div class="line">    <span class="keywordtype">void</span> OutputDataPush(</div><div class="line">        <a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html">CRecipe</a>&amp; recipe,</div><div class="line">        <a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html">CVariantContainer</a> valueContainer,</div><div class="line">        <span class="keyword">const</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_c_update.html">CUpdate</a>&amp; update,</div><div class="line">        intptr_t userProvidedId)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="comment">// The following variables are not used here:</span></div><div class="line">        PYLON_UNUSED(recipe);</div><div class="line">        PYLON_UNUSED(update);</div><div class="line">        PYLON_UNUSED(userProvidedId);</div><div class="line"></div><div class="line">        ResultData currentResultData;</div><div class="line"></div><div class="line">        <span class="comment">// Get the result data of the recipe via the output terminal&#39;s &quot;Image&quot; pin.</span></div><div class="line">        <span class="comment">// The value container is a dictionary/map-like type.</span></div><div class="line">        <span class="comment">// Look for the key in the dictionary.</span></div><div class="line">        <span class="keyword">auto</span> posImage = valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a3fc44da2584b1753851f771cc082f784">find</a>(<span class="stringliteral">&quot;Image&quot;</span>);</div><div class="line">        <span class="comment">// We expect there to be an image</span></div><div class="line">        <span class="comment">// because the recipe is set up to behave like this.</span></div><div class="line">        PYLON_ASSERT(posImage != valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a4e2a26a76dcac9cd1ba3b05f614c26dc">end</a>());</div><div class="line">        <span class="keywordflow">if</span> (posImage != valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a4e2a26a76dcac9cd1ba3b05f614c26dc">end</a>())</div><div class="line">        {</div><div class="line">            <span class="comment">// Now we can use the value of the key/value pair.</span></div><div class="line">            <span class="keyword">const</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html">CVariant</a>&amp; value = posImage-&gt;second;</div><div class="line">            <span class="keywordflow">if</span> (!value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a1a11c43851cb3a1945283c1ca0e3f192">HasError</a>())</div><div class="line">            {</div><div class="line">                currentResultData.image = value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a90581ad4abe467c96797cf5929d91c16">ToImage</a>();</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                currentResultData.hasError = <span class="keyword">true</span>;</div><div class="line">                currentResultData.errorMessage = value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ae7ee85a5e64c1928c59c257fc1422f0a">GetErrorDescription</a>();</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">auto</span> posBoxes = valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a3fc44da2584b1753851f771cc082f784">find</a>(<span class="stringliteral">&quot;Boxes&quot;</span>);</div><div class="line">        PYLON_ASSERT(posBoxes != valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a4e2a26a76dcac9cd1ba3b05f614c26dc">end</a>());</div><div class="line">        <span class="keywordflow">if</span> (posBoxes != valueContainer.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant_container.html#a4e2a26a76dcac9cd1ba3b05f614c26dc">end</a>())</div><div class="line">        {</div><div class="line">            <span class="comment">// Now we can use the value of the key/value pair.</span></div><div class="line">            <span class="keyword">const</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html">CVariant</a>&amp; value = posBoxes-&gt;second;</div><div class="line">            <span class="keywordflow">if</span> (!value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a1a11c43851cb3a1945283c1ca0e3f192">HasError</a>())</div><div class="line">            {</div><div class="line">                <span class="comment">// The value should be an array</span></div><div class="line">                <span class="keywordflow">if</span> (value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a413e5638be4a8bb12b603333752fc8ec">IsArray</a>() == <span class="keyword">true</span>)</div><div class="line">                {</div><div class="line">                    <span class="comment">// Loop over all array elements</span></div><div class="line">                    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a2c47666d4736fa01378f9cc4ee2a3c74">GetNumArrayValues</a>(); ++i)</div><div class="line">                    {</div><div class="line">                        <span class="comment">// Get an element of the array</span></div><div class="line">                        <span class="keyword">const</span> <a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html">CVariant</a>&amp; variant = value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a13e94078a3eb15064632d67d822accf4">GetArrayValue</a>(i);</div><div class="line"></div><div class="line">                        <span class="comment">// The variant arrayElement has the data type VariantDataType_Composite and is defined as follows:</span></div><div class="line">                        <span class="comment">// Composite {</span></div><div class="line">                        <span class="comment">//   &quot;Center&quot; : Composite {</span></div><div class="line">                        <span class="comment">//      &quot;X&quot; : Float,</span></div><div class="line">                        <span class="comment">//      &quot;Y&quot; : Float</span></div><div class="line">                        <span class="comment">//   },</span></div><div class="line">                        <span class="comment">//   Width    : Integer,</span></div><div class="line">                        <span class="comment">//   Height   : Integer,</span></div><div class="line">                        <span class="comment">//   Rotation : Float</span></div><div class="line">                        <span class="comment">// }</span></div><div class="line">                        <span class="comment">//</span></div><div class="line">                        <span class="comment">// Types can be obtained by calling GetDataType(). Sub value names can be obtained with GetSubValueName(size_t index) with the help of GetNumSubValues().</span></div><div class="line"></div><div class="line">                        <span class="keywordflow">try</span></div><div class="line">                        {</div><div class="line">                            <span class="comment">// The data from variant will be stored in the RectangleF struct</span></div><div class="line">                            ResultData::RectangleF rectangle;</div><div class="line"></div><div class="line">                            <span class="comment">// The center values are a nested composite data type. Because of that, the sub value &quot;X&quot; of &quot;Center&quot; is retrieved like a path</span></div><div class="line">                            rectangle.centerX = variant.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ab1a50c14a8648ef06191d46fc3406535">GetSubValue</a>(<span class="stringliteral">&quot;Center&quot;</span>).<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ab1a50c14a8648ef06191d46fc3406535">GetSubValue</a>(<span class="stringliteral">&quot;X&quot;</span>).<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a5a78c675f090e70931e008c0a7bd4105">ToDouble</a>();</div><div class="line">                            rectangle.centerY = variant.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ab1a50c14a8648ef06191d46fc3406535">GetSubValue</a>(<span class="stringliteral">&quot;Center&quot;</span>).<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ab1a50c14a8648ef06191d46fc3406535">GetSubValue</a>(<span class="stringliteral">&quot;Y&quot;</span>).<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a5a78c675f090e70931e008c0a7bd4105">ToDouble</a>();</div><div class="line"></div><div class="line">                            <span class="comment">// Width, height and rotation are sub values of the variant, so they can be directly accessed</span></div><div class="line">                            rectangle.width = variant.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ab1a50c14a8648ef06191d46fc3406535">GetSubValue</a>(<span class="stringliteral">&quot;Width&quot;</span>).<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#adbfc08436d423ab4823db3a2c8289290">ToUInt64</a>();</div><div class="line">                            rectangle.height = variant.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ab1a50c14a8648ef06191d46fc3406535">GetSubValue</a>(<span class="stringliteral">&quot;Height&quot;</span>).<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#adbfc08436d423ab4823db3a2c8289290">ToUInt64</a>();</div><div class="line">                            rectangle.rotation = variant.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ab1a50c14a8648ef06191d46fc3406535">GetSubValue</a>(<span class="stringliteral">&quot;Rotation&quot;</span>).<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#a5a78c675f090e70931e008c0a7bd4105">ToDouble</a>();</div><div class="line"></div><div class="line">                            currentResultData.boxes.push_back(rectangle);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">catch</span> (<span class="keyword">const</span> GenICam::GenericException&amp; e)</div><div class="line">                        {</div><div class="line">                            currentResultData.hasError = <span class="keyword">true</span>;</div><div class="line">                            currentResultData.errorMessage = e.GetDescription();</div><div class="line">                        }</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                currentResultData.hasError = <span class="keyword">true</span>;</div><div class="line">                currentResultData.errorMessage = value.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_variant.html#ae7ee85a5e64c1928c59c257fc1422f0a">GetErrorDescription</a>();</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Add data to the result queue in a thread-safe way.</span></div><div class="line">        {</div><div class="line">            AutoLock scopedLock(m_memberLock);</div><div class="line">            m_queue.emplace_back(currentResultData);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Signal that data is ready.</span></div><div class="line">        m_waitObject.Signal();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Get the wait object for waiting for data.</span></div><div class="line">    <span class="keyword">const</span> WaitObject&amp; GetWaitObject()</div><div class="line">    {</div><div class="line">        <span class="keywordflow">return</span> m_waitObject;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Get one result data object from the queue.</span></div><div class="line">    <span class="keywordtype">bool</span> GetResultData(ResultData&amp; resultDataOut)</div><div class="line">    {</div><div class="line">        AutoLock scopedLock(m_memberLock);</div><div class="line">        <span class="keywordflow">if</span> (m_queue.empty())</div><div class="line">        {</div><div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        resultDataOut = std::move(m_queue.front());</div><div class="line">        m_queue.pop_front();</div><div class="line">        <span class="keywordflow">if</span> (m_queue.empty())</div><div class="line">        {</div><div class="line">            m_waitObject.Reset();</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    CLock m_memberLock;        <span class="comment">// The member lock is required to ensure</span></div><div class="line">                               <span class="comment">// thread-safe access to the member variables.</span></div><div class="line">    WaitObjectEx m_waitObject; <span class="comment">// Signals that ResultData is available.</span></div><div class="line">                               <span class="comment">// It is set if m_queue is not empty.</span></div><div class="line">    list&lt;ResultData&gt; m_queue;  <span class="comment">// The queue of ResultData</span></div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> <span class="comment">/*argc*/</span>, <span class="keywordtype">char</span>* <span class="comment">/*argv*/</span>[])</div><div class="line">{</div><div class="line">    <span class="comment">// The exit code of the sample application.</span></div><div class="line">    <span class="keywordtype">int</span> exitCode = 0;</div><div class="line"></div><div class="line">    <span class="comment">// Enable the pylon camera emulator to provide images from disk</span></div><div class="line">    <span class="comment">// by setting the necessary environment variable.</span></div><div class="line"><span class="preprocessor">#if defined(PYLON_WIN_BUILD)</span></div><div class="line">    _putenv(<span class="stringliteral">&quot;PYLON_CAMEMU=1&quot;</span>);</div><div class="line"><span class="preprocessor">#elif defined(PYLON_UNIX_BUILD)</span></div><div class="line">    setenv(<span class="stringliteral">&quot;PYLON_CAMEMU&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="keyword">true</span>);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">    <span class="comment">// Before using any pylon methods, the pylon runtime must be initialized.</span></div><div class="line">    PylonInitialize();</div><div class="line"></div><div class="line">    <span class="keywordflow">try</span></div><div class="line">    {</div><div class="line">        <span class="comment">// This object is used for collecting the output data.</span></div><div class="line">        <span class="comment">// If placed on the stack, it must be created before the recipe</span></div><div class="line">        <span class="comment">// so that it is destroyed after the recipe.</span></div><div class="line">        MyOutputObserver resultCollector;</div><div class="line"></div><div class="line">        <span class="comment">// Create a recipe object representing a recipe file created using</span></div><div class="line">        <span class="comment">// the pylon Viewer Workbench.</span></div><div class="line">        <a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html">CRecipe</a> recipe;</div><div class="line"></div><div class="line">        <span class="comment">// Load the recipe file.</span></div><div class="line">        <span class="comment">// Note: PYLON_DATAPROCESSING_COMPOSITE_DATA_TYPES_RECIPE is a string</span></div><div class="line">        <span class="comment">// created by the CMake build files.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#ade704260929c747515bb726e7f29612f">Load</a>(PYLON_DATAPROCESSING_COMPOSITE_DATA_TYPES_RECIPE);</div><div class="line"></div><div class="line">        <span class="comment">// Now we allocate all resources we need. This includes the camera device.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#ade90b70669f92e86760d60c20a5be771">PreAllocateResources</a>();</div><div class="line"></div><div class="line">        <span class="comment">// Set up correct image path to samples.</span></div><div class="line">        <span class="comment">// Note: PYLON_DATAPROCESSING_SHAPE_IMAGES_PATH is a string created by the CMake build files.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a6e67cf77c109f3f48f96ccc356cc20d9">GetParameters</a>().<a class="code" href="struct_pylon_1_1_data_processing_1_1_i_parameter_collection.html#a65b80c3531860c3620ac0bb99c37f1e7">Get</a>(<a class="code" href="struct_pylon_1_1_data_processing_1_1_string_parameter_name.html">StringParameterName</a>(<span class="stringliteral">&quot;MyCamera/@CameraDevice/ImageFilename&quot;</span>)).SetValue(PYLON_DATAPROCESSING_SHAPE_IMAGES_PATH);</div><div class="line"></div><div class="line">        <span class="comment">// This is where the output goes.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a39eb91753ef439806df763f3812ab739">RegisterAllOutputsObserver</a>(&amp;resultCollector, RegistrationMode_Append);</div><div class="line"></div><div class="line">        <span class="comment">// Start the processing.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a3a89e0690875436aa185b22854cd8747">Start</a>();</div><div class="line"></div><div class="line">        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; c_countOfImagesToGrab; ++i)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (resultCollector.GetWaitObject().Wait(5000))</div><div class="line">            {</div><div class="line">                ResultData result;</div><div class="line">                resultCollector.GetResultData(result);</div><div class="line">                <span class="keywordflow">if</span> (!result.hasError)</div><div class="line">                {</div><div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;########## Image &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; ##########&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div><div class="line">                    <span class="keywordflow">for</span> (<span class="keyword">const</span> ResultData::RectangleF&amp; box : result.boxes)</div><div class="line">                    {</div><div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;RectangleF {&quot;</span>&lt;&lt; endl</div><div class="line">                             &lt;&lt; <span class="stringliteral">&quot;  Center: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;{&quot;</span> &lt;&lt; endl</div><div class="line">                             &lt;&lt; <span class="stringliteral">&quot;    X: &quot;</span> &lt;&lt; box.centerX &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; endl</div><div class="line">                             &lt;&lt; <span class="stringliteral">&quot;    Y: &quot;</span> &lt;&lt; box.centerY &lt;&lt; endl</div><div class="line">                             &lt;&lt; <span class="stringliteral">&quot;  },&quot;</span> &lt;&lt; endl</div><div class="line">                             &lt;&lt; <span class="stringliteral">&quot;  Width:    &quot;</span> &lt;&lt; box.width &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; endl</div><div class="line">                             &lt;&lt; <span class="stringliteral">&quot;  Height:   &quot;</span> &lt;&lt; box.height &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; endl</div><div class="line">                             &lt;&lt; <span class="stringliteral">&quot;  Rotation: &quot;</span> &lt;&lt; box.rotation &lt;&lt; endl</div><div class="line">                             &lt;&lt; <span class="stringliteral">&quot;}&quot;</span> &lt;&lt; endl;</div><div class="line">                    }</div><div class="line"></div><div class="line">                    cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; endl;</div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef PYLON_WIN_BUILD</span></div><div class="line">                    DisplayImage(1, result.image);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;An error occurred during processing: &quot;</span> &lt;&lt; result.errorMessage &lt;&lt; endl;</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                <span class="keywordflow">throw</span> RUNTIME_EXCEPTION(<span class="stringliteral">&quot;Result timeout&quot;</span>);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Stop the processing.</span></div><div class="line">        recipe.<a class="code" href="class_pylon_1_1_data_processing_1_1_c_recipe.html#a5aac836a86698a2899f1db0cdaaef420">Stop</a>();</div><div class="line">    }</div><div class="line">    <span class="keywordflow">catch</span> (<span class="keyword">const</span> GenericException&amp; e)</div><div class="line">    {</div><div class="line">        <span class="comment">// Error handling</span></div><div class="line">        cerr &lt;&lt; <span class="stringliteral">&quot;An exception occurred.&quot;</span> &lt;&lt; endl &lt;&lt; e.GetDescription() &lt;&lt; endl;</div><div class="line">        exitCode = 1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Comment the following two lines to disable waiting on exit.</span></div><div class="line">    cerr &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Press enter to exit.&quot;</span> &lt;&lt; endl;</div><div class="line">    <span class="keywordflow">while</span> (cin.get() != <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Releases all pylon resources.</span></div><div class="line">    PylonTerminate();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> exitCode;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
<hr>
<div style="font-size: 120%; margin-left: 10px;" id="projectname">pylon C++ Data Processing Programmer&#39;s Guide <span id="projectnumber">1.1.0</span></div>
<address style="margin-left: 10px;"><small>Copyright (c) 2022 <a href="http://www.baslerweb.com/" target="_blank">Basler AG</a> (Wed Jul 6 2022 08:23:49)</small></address>
</body>
</html>
